<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <script src="../dist/bundle.js"></script>
    <link rel="stylesheet" href="../style/lab.css">
    <title>Lab assignment 4: CS 320, Fall 2021</title>

    <style>
      h1:not(:first-child) {
        margin-top: 2em;
      }

      h1 {
        font-size: 120%;
      }

      th, td {
        border: 1px black solid;
      }

      th {
        padding: 1em;
      }

      table {
        border-collapse: collapse;
      }

      #constants_form {
        visibility: hidden;
      }

      .ast {
        margin: 2em;
      }
    </style>
  </head>

  <body>
    <h1>Source input</h1>
    <p>
      <form onsubmit="Lab4.step1(); return false">
        <label for="source">Enter expression:</label>
        <input type="text" id="source" value='A & B ? 1 + - 2 + 3 : "xyz"' style="width: 50%">
        <input type="submit" value="Analyze">
      </form>
    </p>

    <h1>After syntax analysis</h1>
    <p>Abstract syntax tree (AST): <div id="ast" class="ast"></div></p>
    <p>Fully parenthesized expression: <span id="parens"></span></p>

    <h1>Preprocessor input</h1>
    <p>Named constant values:
      <form id="constants_form" disabled="disabled" onsubmit="Lab4.step2(Lab4.tree); return false">
        <table id="constants"></table>
        <input type="submit" value="Calculate">
      </form>
    </p>

    <h1>After preprocessor</h1>
    <p>Expanded abstract syntax tree: <div id="expanded_ast" class="ast"></div></p>
    <p>Fully parenthesized expanded expression: <span id="expanded_parens"></span></p>

    <h1>After optimization</h1>
    <p>Expanded abstract syntax tree with double negations removed: <div id="ast_double_neg"></div></p>
    <p>Fully parenthesized expanded expression with double negations removed: <span id="parens_double_neg"></span></p>

    <h1>After interpreter</h1>
    <p>Result: <span id="result"></span></p>
    <p>Optimized result: <span id="result_double_neg"></span></p>
  </body>

</html>